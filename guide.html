

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="">
    
    
      
        <title>Guide - Snakedoc 0.1.2.dev15+g6e50a46 documentation</title>
      
    
    
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="_static/sphinx_immaterial_theme.90bf258ff6bfcc89a.min.css" />
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#add-docstrings-to-your-snakemake-workflow" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Snakedoc 0.1.2.dev15+g6e50a46 documentation" class="md-header__button md-logo" aria-label="Snakedoc 0.1.2.dev15+g6e50a46 documentation" data-md-component="logo">
      <img src="_static/snakedoc-logo.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Snakedoc 0.1.2.dev15+g6e50a46 documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Guide
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/smutch/snakedoc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Snakedoc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Snakedoc 0.1.2.dev15+g6e50a46 documentation" class="md-nav__button md-logo" aria-label="Snakedoc 0.1.2.dev15+g6e50a46 documentation" data-md-component="logo">
      <img src="_static/snakedoc-logo.svg" alt="logo">
    </a>
    Snakedoc 0.1.2.dev15+g6e50a46 documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/smutch/snakedoc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Snakedoc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Guide</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Guide</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Guide</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-docstrings-to-your-snakemake-workflow" class="md-nav__link">
    <span class="md-ellipsis">Add docstrings to your Snakemake workflow</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-sphinx-and-snakedoc" class="md-nav__link">
    <span class="md-ellipsis">Set up Sphinx and Snakedoc</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-your-docs" class="md-nav__link">
    <span class="md-ellipsis">Generate your docs</span>
  </a>
  
    <nav class="md-nav" aria-label="Generate your docs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-inline-docstrings" class="md-nav__link">
    <span class="md-ellipsis">From inline docstrings</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directly-in-your-docs" class="md-nav__link">
    <span class="md-ellipsis">Directly in your docs</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rules-index" class="md-nav__link">
    <span class="md-ellipsis">Rules index</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compile" class="md-nav__link">
    <span class="md-ellipsis">Compile!</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-next" class="md-nav__link">
    <span class="md-ellipsis">What next?</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="FAQ.html" class="md-nav__link">
        <span class="md-ellipsis">Frequently Asked Questions</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Guide</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#add-docstrings-to-your-snakemake-workflow" class="md-nav__link">
    <span class="md-ellipsis">Add docstrings to your Snakemake workflow</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-sphinx-and-snakedoc" class="md-nav__link">
    <span class="md-ellipsis">Set up Sphinx and Snakedoc</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generate-your-docs" class="md-nav__link">
    <span class="md-ellipsis">Generate your docs</span>
  </a>
  
    <nav class="md-nav" aria-label="Generate your docs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-inline-docstrings" class="md-nav__link">
    <span class="md-ellipsis">From inline docstrings</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directly-in-your-docs" class="md-nav__link">
    <span class="md-ellipsis">Directly in your docs</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rules-index" class="md-nav__link">
    <span class="md-ellipsis">Rules index</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compile" class="md-nav__link">
    <span class="md-ellipsis">Compile!</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-next" class="md-nav__link">
    <span class="md-ellipsis">What next?</span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


<h1 id="guide">Guide<a class="headerlink" href="#guide" title="Permalink to this heading">¶</a></h1>
<p><strong>If you haven’t already, first</strong> <a class="reference external" href="installation.html"><strong>install Snakedoc</strong></a>.</p>
<h2 id="add-docstrings-to-your-snakemake-workflow">Add docstrings to your Snakemake workflow<a class="headerlink" href="#add-docstrings-to-your-snakemake-workflow" title="Permalink to this heading">¶</a></h2>
<p>The main feature of Snakedoc is the generation of documentation for your
Snakemake workflow. To do this, you need to add docstrings to the rules in your
Snakemake files. The docstrings should be written in either <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">reStructuredText</a>
or <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">google docstrings</a> format and placed in triple quotes at the start of each
rule, in exactly the same way as you would document a Python function. For
example <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>:</p>
<div class="tabbed-set tabbed-alternate custom-tab-set-style" data-tabs="1:2" id="example-rule">
<input checked type="radio" id="__tabbed_1_1" name="__tabbed_1"><input type="radio" id="__tabbed_1_2" name="__tabbed_1"><div class="tabbed-labels docutils container">
<label class="tabbed-label" for="__tabbed_1_1">
reStructuredText</label><label class="tabbed-label" for="__tabbed_1_2">
Google style</label></div>
<div class="tabbed-content docutils container">
<div class="tabbed-block docutils container">
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code>rule beast:
    &quot;&quot;&quot;
    Run Beast2, either restarting from a state file or from scratch.

    <span class="nc">:input alignment:</span>         the aligned fasta file output from <span class="na">:smk:ref:</span><span class="nv">`align`</span>
    <span class="nc">:input template:</span>          the Beast 2 input XML file, templated with <span class="s">`feast </span><span class="si">&lt;https://github.com/tgvaughan/feast&gt;</span><span class="s">`_</span>.
                              If <span class="s">``inherit``</span> is set in the config then the output of the <span class="na">:smk:ref:</span><span class="nv">`onlinebeast`</span> rule is used,
                              otherwise the output of the <span class="na">:smk:ref:</span><span class="nv">`dynamicbeast`</span> rule is used.

    <span class="nc">:output:</span>                  the tree log, trace log, and statefile from Beast2

    <span class="nc">:config inherit:</span>          are we inheriting from a previous run?
    <span class="nc">:config beast.dynamic:</span>    the dynamic variables used to populate the feast template.
    <span class="nc">:config beast.beast:</span>      Beast2 command line arguments to pass (beyond the params, statefile and input)
    <span class="nc">:config beast.threads:</span>    the number of cores to run with (both locally or when submitting to a cluster)
    <span class="nc">:config beast.resources:</span>  the resources to request when submitting to a cluster

    <span class="nc">:envmodules:</span>              environment variables to load for the Spartan HPC system

<span class="p">    ..</span><span class="ow">note</span><span class="p">::</span>
        GPU acceleration is <span class="gs">**not**</span> requested by default. If you are running on a machine with a compatible GPU then
        please replace <span class="s">``-beagle``</span> with <span class="s">``-beagle_GPU``</span> in the <span class="s">``beast.beast``</span> entry in your McCoy <span class="s">``config.yaml``</span> file.
    &quot;&quot;&quot;

    input: ...
    output: ...
<span class="cp">    ...</span>
</code></pre></div>
</div>
</div>
<div class="tabbed-block docutils container">
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><code>rule beast:
    &quot;&quot;&quot;
    Run Beast2, either restarting from a state file or from scratch.

    Input:
        alignment:  the aligned fasta file output from :smk:ref:`align`
        template:   the Beast 2 input XML file, templated with <span class="sb">`feast &lt;https://github.com/tgvaughan/feast&gt;`</span>_.
                    If ``inherit`` is set in the config then the output of the :smk:ref:`onlinebeast` rule is used,
                    otherwise the output of the :smk:ref:`dynamicbeast` rule is used.

    Output:
        : the tree log, trace log, and statefile from Beast2

    Config:
        inherit:          are we inheriting from a previous run?
        beast.dynamic:    the dynamic variables used to populate the feast template.
        beast.beast:      Beast2 command line arguments to pass (beyond the params, statefile and input)
        beast.threads:    the number of cores to run with (both locally or when submitting to a cluster)
        beast.resources:  the resources to request when submitting to a cluster

    envmodules:
        environment variables to load for the Spartan HPC system

    Note:
        GPU acceleration is <span class="gs">**not**</span> requested by default. If you are running on a machine with a compatible GPU then
        please replace ``-beagle`` with ``-beagle_GPU`` in the ``beast.beast`` entry in your McCoy ``config.yaml`` file.
    &quot;&quot;&quot;

    input: ...
    output: ...
    ...
</code></pre></div>
</div>
</div>
</div>
</div><p>If you are familiar with Python docstrings then you will feel right at home.</p>
<p>As recommended in normal Python code, the basic layout of a docstring comprises
of a short, concise explanation of the purpose of the rule. This is then
optionally followed by a longer explanation, perhaps referencing relevant
papers, discussing potential issues and future improvements, etc.</p>
<p>Next comes a list of fields with a brief sentence or two indicating the logical
meaning and other useful information for each of the Snakemake directives and
their entries. Below is a list of reccognised directives that can be documented
using Snakedoc. Some accept multiple, named values (c.f. the
<code class="docutils literal notranslate"><span class="pre">:input:</span></code> and <code class="docutils literal notranslate"><span class="pre">:config:</span></code> fields in the example above). Others do not:</p>
<table class="docutils data align-default" id="id4">
<caption><span class="caption-text">Recognised Snakemake directives</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p># values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>benchmark</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-odd"><td><p>config</p></td>
<td><p>multiple</p></td>
</tr>
<tr class="row-even"><td><p>default_target</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-odd"><td><p>group</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-even"><td><p>input</p></td>
<td><p>multiple</p></td>
</tr>
<tr class="row-odd"><td><p>log</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-even"><td><p>notebook</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-odd"><td><p>output</p></td>
<td><p>multiple</p></td>
</tr>
<tr class="row-even"><td><p>param</p></td>
<td><p>multiple</p></td>
</tr>
<tr class="row-odd"><td><p>priority</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-even"><td><p>resource</p></td>
<td><p>multiple</p></td>
</tr>
<tr class="row-odd"><td><p>retries</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-even"><td><p>run</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-odd"><td><p>script</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-even"><td><p>shell</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-odd"><td><p>threads</p></td>
<td><p>single</p></td>
</tr>
<tr class="row-even"><td><p>wildcard_constraints</p></td>
<td><p>single</p></td>
</tr>
</tbody>
</table>
<p>Finally, you may wish to include extra notes, caveats, etc. at the end of the docstring.
You can include any valid <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">reStructuredText</a> and it will be marked up
accordingly (e.g. the <code class="docutils literal notranslate"><span class="pre">..note::</span></code> <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">reStructuredText</a> directive in the example above).</p>
<p>For more basic examples, see the <a class="reference external" href="https://github.com/smutch/snakedoc/tree/main/example">example directory of the Snakedoc repo</a>. For an example of a
production pipeline fully documented with Snakedoc complete, check out the
<a class="reference external" href="https://github.com/mccoy-devs/mccoy">McCoy phylodynamics workflow</a>.</p>
<h2 id="set-up-sphinx-and-snakedoc">Set up Sphinx and Snakedoc<a class="headerlink" href="#set-up-sphinx-and-snakedoc" title="Permalink to this heading">¶</a></h2>
<p>Begin by creating a standard Sphinx project using the <a class="reference external" href="https://www.sphinx-doc.org/en/master/man/sphinx-quickstart.html">sphinx-quickstart</a> tool. This
will create a Sphinx configuration file called <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. To enable
Snakedoc, simply add <code class="docutils literal notranslate"><span class="pre">&quot;snakedoc&quot;</span></code> to the extensions list:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;snakedoc&quot;</span><span class="p">]</span>
</code></pre></div>
</div>
<p>A useful feature of Snakedoc is to provide a link to the source code of each
rule in the documentation. Since the head of this link will depend on the
public location of your source code (Github, Bitbucket, Gitlab, private
hosting, etc.) you need to provide a mapping between the full path to the
source code on your local machine and the public link. This is set using the
<code class="docutils literal notranslate"><span class="pre">smk_linkcode_mapping</span></code> config parameter, a 2-element tuple telling Snakedoc
to replace all instances of the first element with the second.</p>
<p>For example, if your source code is located on your local machine in
<code class="docutils literal notranslate"><span class="pre">/home/username/workflow</span></code> and your public Github repository is located at
<code class="docutils literal notranslate"><span class="pre">https://github.com/username/workflow</span></code>, then you could use something like the
following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">smk_linkcode_mapping</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;/home/username/workflow&quot;</span><span class="p">,</span> <span class="s2">&quot;https://github.com/username/workflow/blob/master&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">smk_linkcode_mapping</span></code> is a Python tuple, you can use any valid Python
code to make this work on any machine without hardcoding the path:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="n">smk_linkcode_mapping</span> <span class="o">=</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="s2">&quot;https://github.com/username/workflow/blob/master&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="generate-your-docs">Generate your docs<a class="headerlink" href="#generate-your-docs" title="Permalink to this heading">¶</a></h2>
<h3 id="from-inline-docstrings">From inline docstrings<a class="headerlink" href="#from-inline-docstrings" title="Permalink to this heading">¶</a></h3>
<p>To add documentation generated from inline docstrings in a Snakemake file, use
the <code class="docutils literal notranslate"><span class="pre">smk:autodoc</span></code> directive. For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">smk:autodoc</span><span class="p">::</span> ../../workflow/Snakefile
</code></pre></div>
</div>
<p>where the path is relative to the current Sphinx <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">reStructuredText</a> file.</p>
<p>There are several additional arguments and options that can be passed to the
<code class="docutils literal notranslate"><span class="pre">autodoc</span></code> directive:</p>
<ul>
<li><p>A list of rules to document. This allows for more freedom in how you generate
your documentation and allows you split up rules from the same Snakemake file
into different documentation pages. e.g.:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">smk:autodoc</span><span class="p">::</span> ../../workflow/rules/others.smk ruleA ruleC
</code></pre></div>
</div>
</li>
<li><p>The path to a config file used to populate the Snakemake <code class="docutils literal notranslate"><span class="pre">config</span></code>
dictionary. This information is used by Snakedoc to report the default values
of config parameters. e.g.:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">smk</span><span class="p">::</span>autodoc:: ../../workflow/Snakefile
   <span class="nc">:configfile:</span> ../../workflow/config.yaml
</code></pre></div>
</div>
</li>
<li><p>Individual config parameters in the form of <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">=</span> <span class="pre">value</span></code> entries. This can
be used instead of the <code class="docutils literal notranslate"><span class="pre">configfile</span></code> option or in addition to it, to
override the values of parameters. e.g.:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">smk</span><span class="p">::</span>autodoc:: ../../workflow/Snakefile
   <span class="nc">:config:</span>
       param_a = 1
       param_b = 20
</code></pre></div>
</div>
</li>
</ul>
<h3 id="directly-in-your-docs">Directly in your docs<a class="headerlink" href="#directly-in-your-docs" title="Permalink to this heading">¶</a></h3>
<p>In addition to pulling documentation from embedded docstrings, you can also
manually document rules and checkpoints directly in your Sphinx
<a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/index.html">reStructuredText</a> files. For example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">smk:rule</span><span class="p">::</span> handwritten

   This is a handwritten docstring.

   <span class="nc">:input:</span> A super-dooper result file
   <span class="nc">:output:</span> A swanky plot
   <span class="nc">:param γ:</span> The gradient of the line
   <span class="nc">:config handwritten.length:</span> A phony config parameter

<span class="p">..</span> <span class="ow">smk:checkpoint</span><span class="p">::</span> handwritten_checkpoint

   Checkpoints are supported too.

   <span class="nc">:input:</span> Some data
   <span class="nc">:output:</span> A directory with an undetermined number of files
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>See the <a class="reference external" href="https://github.com/smutch/snakedoc/tree/main/example">example directory</a> for more usage examples.</p>
</div>
<h3 id="rules-index">Rules index<a class="headerlink" href="#rules-index" title="Permalink to this heading">¶</a></h3>
<p>Snakedoc also generates an index of your rules and checkpoints which can be linked to in your documentation using:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code><span class="na">:ref:</span><span class="nv">`smk-rule`</span>
</code></pre></div>
</div>
<h3 id="compile">Compile!<a class="headerlink" href="#compile" title="Permalink to this heading">¶</a></h3>
<p>The easiest way to compile your documentation and produce HTML files which can be served on Github pages or any other static hosting service, use the Makefile provided by Sphinx:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><code>make html
</code></pre></div>
</div>
<h2 id="what-next">What next?<a class="headerlink" href="#what-next" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>For more information on writing and compiling documentation with Sphinx, see their <a class="reference external" href="https://www.sphinx-doc.org/en/master/">help pages</a>.</p></li>
<li><p>Have a look at the <a class="reference external" href="https://github.com/smutch/snakedoc/tree/main/example">example directory</a>.</p></li>
<li><p>Look at some real life examples of workflows documented with Snakedoc. For example, the <a class="reference external" href="https://github.com/mccoy-devs/mccoy">McCoy phylodynamics workflow</a>.</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Taken from the <a class="reference external" href="https://github.com/mccoy-devs/mccoy">McCoy Phylodynamics Workflow</a>.</p>
</aside>
<aside class="footnote brackets" id="f2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/configuration.html#module-conf">https://www.sphinx-doc.org/en/master/usage/configuration.html#module-conf</a></p>
</aside>
</aside>






                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="installation.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="FAQ.html" class="md-footer__link md-footer__link--next" aria-label="Next: Frequently Asked Questions" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Frequently Asked Questions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2022, Simon Mutch.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    5.3.0.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["content.code.annotate", "navigation.instant", "toc.follow"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="_static/sphinx_immaterial_theme.cea6a0c1d5b0618cf.min.js"></script>
    
  </body>
</html>